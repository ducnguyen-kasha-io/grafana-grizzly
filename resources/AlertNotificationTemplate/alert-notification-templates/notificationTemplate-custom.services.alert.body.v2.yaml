apiVersion: grizzly.grafana.com/v1alpha1
kind: AlertNotificationTemplate
metadata:
    name: custom.services.alert.body.v2
spec:
    name: custom.services.alert.body.v2
    template: "{{ define \"custom.services.alert.body.v2\" }}\n{{ range $k, $v := .Alerts.Firing }}\n\n{{ $serviceName  := index $v.Labels \"service.name\" }}\n{{ if and $serviceName (ne $serviceName \"N/A\") }}\n- \U0001F525 {{ $serviceName }}\n{{ end }}\n\n{{ $http_error_message := index $v.Labels \"labels.http_error_message\" }}\n{{ if and $http_error_message (ne $http_error_message \"N/A\") }}\n- ❗ Http error message: **** {{ $http_error_message }} ****\n{{ end }}\n\n{{ $http_status_text  := index $v.Labels \"labels.http_status_text\" }}\n{{ if and $http_status_text (ne $http_status_text \"N/A\") }}\n- ❗ Http status message: **** {{ $http_status_text }} ****\n{{ end }}\n\n{{ $hostname := index $v.Labels \"host.hostname\" }}\n{{ if and $hostname (ne $hostname \"N/A\") }}\n- ❗ Host name: **** {{ $hostname }} ****\n{{ end }}\n\n{{ $db_operation := index $v.Labels \"labels.db_operation\" }}\n{{ if and $db_operation (ne $db_operation \"N/A\") }}\n- ❗ Db operations: **** {{ $db_operation }} ****\n{{ end }}\n\n{{ $transaction_name := index $v.Labels \"transaction.name\" }}\n{{ if and $transaction_name (ne $transaction_name \"N/A\") }}\n- ❗ Transaction name: **** {{ $transaction_name }} ****\n{{ end }}\n\n{{ $source_domain := index $v.Labels \"source.domain\" }}\n{{ if and $source_domain (ne $source_domain \"N/A\") }}\n- ❗ Source domain: **** {{ $source_domain }} ****\n{{ end }}\n\n\n\n- \U0001F517 Dashboard: [{{ .DashboardURL }}]({{ .DashboardURL }})\n\n- \U0001F517 Silence this notification: [{{ $v.SilenceURL }}]({{ $v.SilenceURL }})\n\n{{ end }}\n{{ end }}"
