apiVersion: grizzly.grafana.com/v1alpha1
kind: Dashboard
metadata:
    folder: fen97rev6xp8ga
    name: AgileosConsultingHTTPBlackBoxExporter
spec:
    annotations:
        list:
            - builtIn: 1
              datasource:
                type: grafana
                uid: -- Grafana --
              enable: true
              hide: true
              iconColor: rgba(0, 211, 255, 1)
              name: Annotations & Alerts
              target:
                limit: 100
                matchAny: false
                tags: []
                type: dashboard
              type: dashboard
    description: "Visualize HTTP data reported by blackbox exporter.  \r\nMade by Fabio Pardi - Agileos Consulting LTD \r\nYour Trusted Remote DBA\r\nwww.agileosconsulting.com "
    editable: true
    fiscalYearStartMonth: 0
    graphTooltip: 2
    links: []
    panels:
        - datasource:
            type: prometheus
            uid: beih2n435vc3kb
          description: ""
          fieldConfig:
            defaults:
                color:
                    mode: thresholds
                mappings: []
                noValue: Times in UTC
                thresholds:
                    mode: absolute
                    steps:
                        - color: '#567080'
            overrides: []
          gridPos:
            h: 2
            w: 5
            x: 0
            "y": 0
          id: 19
          options:
            colorMode: value
            graphMode: area
            justifyMode: center
            orientation: auto
            percentChangeColorMode: standard
            reduceOptions:
                calcs:
                    - lastNotNull
                fields: ""
                values: false
            showPercentChange: false
            text: {}
            textMode: auto
            wideLayout: true
          pluginVersion: 11.6.0
          targets:
            - refId: A
          title: ""
          transparent: true
          type: stat
        - datasource:
            type: prometheus
            uid: beih2n435vc3kb
          description: ""
          fieldConfig:
            defaults: {}
            overrides: []
          gridPos:
            h: 4
            w: 6
            x: 9
            "y": 0
          id: 17
          options:
            forceImageRefresh: false
            imageUrl: your_logo_here
            lockSensors: false
            mappings: []
            sensors: []
            sensorsTextSize: 10
          pluginVersion: 11.6.0
          targets:
            - datasource:
                type: prometheus
                uid: beih2n435vc3kb
              expr: ""
              refId: A
          title: ""
          transparent: true
          type: pierosavi-imageit-panel
        - datasource:
            type: prometheus
            uid: beih2n435vc3kb
          description: ""
          fieldConfig:
            defaults: {}
            overrides: []
          gridPos:
            h: 3
            w: 6
            x: 18
            "y": 0
          id: 21
          options:
            bgColor: transparent
            clockType: 24 hour
            countdownSettings:
                endCountdownTime: "2021-11-26T19:41:23+02:00"
                endText: "00:00:00"
            countupSettings:
                beginCountupTime: "2022-02-23T17:04:53+02:00"
                beginText: "00:00:00"
            dateSettings:
                dateFormat: YYYY-MM-DD
                fontSize: 20px
                fontWeight: normal
                locale: ""
                showDate: false
            fontMono: false
            mode: time
            refresh: sec
            timeSettings:
                fontSize: 24px
                fontWeight: bold
            timezone: UTC
            timezoneSettings:
                fontSize: 12px
                fontWeight: bold
                showTimezone: false
                zoneFormat: abbv
          pluginVersion: 11.6.0
          targets:
            - refId: A
          title: ""
          transparent: true
          type: grafana-clock-panel
        - collapsed: false
          gridPos:
            h: 1
            w: 24
            x: 0
            "y": 4
          id: 23
          panels: []
          title: Overview
          type: row
        - datasource:
            type: prometheus
            uid: beih2n435vc3kb
          description: ""
          fieldConfig:
            defaults:
                color:
                    mode: thresholds
                mappings: []
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                        - color: red
                          value: 80
            overrides: []
          gridPos:
            h: 4
            w: 5
            x: 0
            "y": 5
          id: 6
          options:
            colorMode: value
            graphMode: none
            justifyMode: auto
            orientation: auto
            percentChangeColorMode: standard
            reduceOptions:
                calcs:
                    - lastNotNull
                fields: ""
                values: false
            showPercentChange: false
            textMode: auto
            wideLayout: true
          pluginVersion: 11.6.0
          targets:
            - datasource:
                type: prometheus
                uid: beih2n435vc3kb
              expr: count (up{job="blackbox-http"})
              refId: A
          title: Number Of Monitors
          type: stat
        - datasource:
            type: prometheus
            uid: beih2n435vc3kb
          description: ""
          fieldConfig:
            defaults:
                color:
                    mode: thresholds
                decimals: 3
                mappings: []
                thresholds:
                    mode: absolute
                    steps:
                        - color: red
                        - color: '#EAB839'
                          value: 95
                        - color: green
                          value: 99
                unit: percent
            overrides: []
          gridPos:
            h: 4
            w: 9
            x: 5
            "y": 5
          id: 24
          options:
            colorMode: value
            graphMode: none
            justifyMode: auto
            orientation: auto
            percentChangeColorMode: standard
            reduceOptions:
                calcs:
                    - lastNotNull
                fields: ""
                values: false
            showPercentChange: false
            textMode: auto
            wideLayout: true
          pluginVersion: 11.6.0
          targets:
            - datasource:
                type: prometheus
                uid: beih2n435vc3kb
              expr: 'avg_over_time(probe_success{instance="$instance"}[90d]) * 100 '
              refId: A
          title: Uptime last 90 days for $instance
          type: stat
        - datasource:
            type: prometheus
            uid: beih2n435vc3kb
          description: ""
          fieldConfig:
            defaults:
                color:
                    mode: thresholds
                mappings: []
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                        - color: orange
                          value: 1
                        - color: red
                          value: 3
                unit: s
            overrides: []
          gridPos:
            h: 4
            w: 10
            x: 14
            "y": 5
          id: 4
          options:
            colorMode: value
            graphMode: none
            justifyMode: auto
            orientation: auto
            percentChangeColorMode: standard
            reduceOptions:
                calcs:
                    - lastNotNull
                fields: ""
                values: false
            showPercentChange: false
            textMode: auto
            wideLayout: true
          pluginVersion: 11.6.0
          targets:
            - datasource:
                type: prometheus
                uid: beih2n435vc3kb
              editorMode: code
              expr: sum((avg_over_time(probe_http_duration_seconds{instance="$instance"}[24h])))
              legendFormat: '{{instance}}'
              range: true
              refId: A
          title: Average Response Time - $instance
          type: stat
        - datasource:
            type: prometheus
            uid: beih2n435vc3kb
          description: ""
          fieldConfig:
            defaults:
                color:
                    mode: thresholds
                mappings: []
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                        - color: red
                          value: 80
            overrides: []
          gridPos:
            h: 4
            w: 5
            x: 0
            "y": 9
          id: 7
          options:
            colorMode: value
            graphMode: none
            justifyMode: auto
            orientation: auto
            percentChangeColorMode: standard
            reduceOptions:
                calcs:
                    - lastNotNull
                fields: ""
                values: false
            showPercentChange: false
            textMode: auto
            wideLayout: true
          pluginVersion: 11.6.0
          targets:
            - datasource:
                type: prometheus
                uid: beih2n435vc3kb
              expr: count(probe_success == 1)
              refId: A
          title: Monitors Online
          type: stat
        - datasource:
            type: prometheus
            uid: beih2n435vc3kb
          description: ""
          fieldConfig:
            defaults:
                color:
                    mode: thresholds
                mappings:
                    - options:
                        "0":
                            color: red
                            index: 1
                            text: ERROR
                        "1":
                            color: green
                            index: 0
                            text: OK
                      type: value
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
            overrides: []
          gridPos:
            h: 4
            w: 5
            x: 5
            "y": 9
          id: 8
          options:
            colorMode: value
            graphMode: none
            justifyMode: auto
            orientation: auto
            percentChangeColorMode: standard
            reduceOptions:
                calcs:
                    - lastNotNull
                fields: ""
                values: false
            showPercentChange: false
            textMode: auto
            wideLayout: true
          pluginVersion: 11.6.0
          targets:
            - datasource:
                type: prometheus
                uid: beih2n435vc3kb
              expr: probe_http_ssl{instance="$instance"}
              refId: A
          title: SSL Status on $instance
          type: stat
        - datasource:
            type: prometheus
            uid: beih2n435vc3kb
          description: ""
          fieldConfig:
            defaults:
                color:
                    mode: thresholds
                mappings: []
                thresholds:
                    mode: absolute
                    steps:
                        - color: red
                        - color: '#EAB839'
                          value: 7
                        - color: green
                          value: 15
                unit: d
            overrides: []
          gridPos:
            h: 4
            w: 7
            x: 10
            "y": 9
          id: 9
          options:
            colorMode: value
            graphMode: none
            justifyMode: auto
            orientation: auto
            percentChangeColorMode: standard
            reduceOptions:
                calcs:
                    - lastNotNull
                fields: ""
                values: false
            showPercentChange: false
            textMode: auto
            wideLayout: true
          pluginVersion: 11.6.0
          targets:
            - datasource:
                type: prometheus
                uid: beih2n435vc3kb
              expr: '(((probe_ssl_earliest_cert_expiry{instance="$instance"}) - time()) / 60 / 60 / 24) '
              refId: A
          title: '$instance SSL Certificate expiration in '
          type: stat
        - datasource:
            type: prometheus
            uid: beih2n435vc3kb
          description: ""
          fieldConfig:
            defaults:
                color:
                    mode: thresholds
                mappings:
                    - options:
                        "200":
                            color: green
                            index: 0
                            text: OK
                      type: value
                    - options:
                        from: 0
                        result:
                            color: red
                            index: 1
                            text: ERROR
                        to: 1000
                      type: range
                    - options:
                        match: null+nan
                        result:
                            color: red
                            index: 2
                            text: "0"
                      type: special
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
            overrides: []
          gridPos:
            h: 4
            w: 7
            x: 17
            "y": 9
          id: 13
          options:
            colorMode: value
            graphMode: none
            justifyMode: auto
            orientation: auto
            percentChangeColorMode: standard
            reduceOptions:
                calcs:
                    - lastNotNull
                fields: ""
                values: false
            showPercentChange: false
            textMode: auto
            wideLayout: true
          pluginVersion: 11.6.0
          targets:
            - datasource:
                type: prometheus
                uid: beih2n435vc3kb
              expr: probe_http_status_code{instance="$instance"}
              refId: A
          title: HTTP status $instance
          type: stat
        - datasource:
            type: prometheus
            uid: beih2n435vc3kb
          description: ""
          fieldConfig:
            defaults:
                color:
                    fixedColor: green
                    mode: fixed
                decimals: 3
                mappings: []
                max: 100
                min: 0
                thresholds:
                    mode: absolute
                    steps:
                        - color: transparent
                        - color: red
                          value: 0
                        - color: orange
                          value: 95
                        - color: green
                          value: 99
                unit: percent
            overrides: []
          gridPos:
            h: 9
            w: 24
            x: 0
            "y": 13
          id: 2
          options:
            displayMode: lcd
            legend:
                calcs: []
                displayMode: list
                placement: bottom
                showLegend: false
            maxVizHeight: 300
            minVizHeight: 10
            minVizWidth: 0
            namePlacement: auto
            orientation: horizontal
            reduceOptions:
                calcs:
                    - lastNotNull
                fields: ""
                values: false
            showUnfilled: true
            sizing: auto
            valueMode: color
          pluginVersion: 11.6.0
          targets:
            - datasource:
                type: prometheus
                uid: beih2n435vc3kb
              editorMode: code
              exemplar: false
              expr: 'avg_over_time(probe_success{}[24h]) * 100 '
              format: time_series
              instant: false
              interval: ""
              legendFormat: '{{instance}}'
              range: true
              refId: A
          title: Uptime Overview Last 24h - All Systems
          transformations:
            - id: renameByRegex
              options:
                regex: https://(.*)
                renamePattern: $1
          type: bargauge
        - collapsed: false
          gridPos:
            h: 1
            w: 24
            x: 0
            "y": 22
          id: 26
          panels: []
          title: Detailed Overview for $instance
          type: row
        - datasource:
            type: prometheus
            uid: beih2n435vc3kb
          description: ""
          fieldConfig:
            defaults:
                color:
                    mode: palette-classic
                custom:
                    axisBorderShow: false
                    axisCenteredZero: false
                    axisColorMode: text
                    axisGridShow: false
                    axisLabel: ""
                    axisPlacement: auto
                    barAlignment: 0
                    barWidthFactor: 0.6
                    drawStyle: line
                    fillOpacity: 14
                    gradientMode: none
                    hideFrom:
                        legend: false
                        tooltip: false
                        viz: false
                    insertNulls: false
                    lineInterpolation: linear
                    lineWidth: 1
                    pointSize: 5
                    scaleDistribution:
                        type: linear
                    showPoints: never
                    spanNulls: false
                    stacking:
                        group: A
                        mode: none
                    thresholdsStyle:
                        mode: "off"
                decimals: 0
                mappings:
                    - options:
                        "0":
                            color: red
                            index: 1
                            text: NOT OK
                        "1":
                            color: green
                            index: 0
                            text: OK
                      type: value
                    - options:
                        match: null+nan
                        result:
                            color: red
                            index: 2
                            text: NOT OK
                      type: special
                max: 1
                min: 0
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                unit: none
            overrides: []
          gridPos:
            h: 10
            w: 12
            x: 0
            "y": 23
          id: 14
          options:
            legend:
                calcs: []
                displayMode: list
                placement: bottom
                showLegend: false
            tooltip:
                hideZeros: false
                mode: none
                sort: none
          pluginVersion: 11.6.0
          targets:
            - datasource:
                type: prometheus
                uid: beih2n435vc3kb
              editorMode: code
              exemplar: false
              expr: (probe_success{instance="$instance"}  )
              format: time_series
              instant: false
              interval: 30s
              legendFormat: '{{instance}}'
              range: true
              refId: A
          title: Health Over Time - $instance
          type: timeseries
        - datasource:
            type: prometheus
            uid: beih2n435vc3kb
          description: ""
          fieldConfig:
            defaults:
                color:
                    mode: palette-classic
                custom:
                    axisBorderShow: false
                    axisCenteredZero: false
                    axisColorMode: text
                    axisGridShow: false
                    axisLabel: ""
                    axisPlacement: auto
                    barAlignment: 0
                    barWidthFactor: 0.6
                    drawStyle: line
                    fillOpacity: 14
                    gradientMode: none
                    hideFrom:
                        legend: false
                        tooltip: false
                        viz: false
                    insertNulls: false
                    lineInterpolation: linear
                    lineWidth: 1
                    pointSize: 5
                    scaleDistribution:
                        type: linear
                    showPoints: never
                    spanNulls: false
                    stacking:
                        group: A
                        mode: none
                    thresholdsStyle:
                        mode: "off"
                decimals: 0
                mappings: []
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
            overrides: []
          gridPos:
            h: 10
            w: 12
            x: 12
            "y": 23
          id: 15
          options:
            legend:
                calcs: []
                displayMode: table
                placement: bottom
                showLegend: true
            tooltip:
                hideZeros: false
                mode: none
                sort: none
          pluginVersion: 11.6.0
          targets:
            - datasource:
                type: prometheus
                uid: beih2n435vc3kb
              editorMode: code
              exemplar: false
              expr: count((probe_http_status_code{instance="$instance"}  >= 200) AND (probe_http_status_code{instance="$instance"}  <= 299))
              format: time_series
              instant: false
              interval: 30s
              legendFormat: Success 2xx
              range: true
              refId: A
            - datasource:
                type: prometheus
                uid: beih2n435vc3kb
              editorMode: code
              exemplar: false
              expr: count((probe_http_status_code{instance="$instance"}  >= 300) AND (probe_http_status_code{instance="$instance"}  <= 399))
              format: time_series
              hide: false
              instant: false
              interval: 30s
              legendFormat: Redirect 3xx
              range: true
              refId: B
            - datasource:
                type: prometheus
                uid: beih2n435vc3kb
              editorMode: code
              exemplar: false
              expr: count((probe_http_status_code{instance="$instance"}  >= 400) AND (probe_http_status_code{instance="$instance"}  <= 499))
              format: time_series
              hide: false
              instant: false
              interval: 30s
              legendFormat: Client Error 4xx
              range: true
              refId: C
            - datasource:
                type: prometheus
                uid: beih2n435vc3kb
              editorMode: code
              exemplar: false
              expr: count((probe_http_status_code{instance="$instance"}  >= 500) AND (probe_http_status_code{instance="$instance"}  <= 599))
              format: time_series
              hide: false
              instant: false
              interval: 30s
              legendFormat: Server Error 5xx
              range: true
              refId: D
          title: HTTP Response code - $instance
          type: timeseries
        - datasource:
            type: prometheus
            uid: beih2n435vc3kb
          description: ""
          fieldConfig:
            defaults:
                color:
                    mode: palette-classic
                custom:
                    axisBorderShow: false
                    axisCenteredZero: false
                    axisColorMode: text
                    axisLabel: ""
                    axisPlacement: auto
                    barAlignment: 0
                    barWidthFactor: 0.6
                    drawStyle: line
                    fillOpacity: 0
                    gradientMode: none
                    hideFrom:
                        legend: false
                        tooltip: false
                        viz: false
                    insertNulls: false
                    lineInterpolation: linear
                    lineWidth: 1
                    pointSize: 5
                    scaleDistribution:
                        type: linear
                    showPoints: auto
                    spanNulls: false
                    stacking:
                        group: A
                        mode: none
                    thresholdsStyle:
                        mode: "off"
                decimals: 1
                mappings: []
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                        - color: red
                          value: 80
                unit: s
            overrides: []
          gridPos:
            h: 12
            w: 12
            x: 0
            "y": 33
          id: 11
          options:
            legend:
                calcs: []
                displayMode: list
                placement: bottom
                showLegend: true
            tooltip:
                hideZeros: false
                mode: single
                sort: none
          pluginVersion: 11.6.0
          targets:
            - datasource:
                type: prometheus
                uid: beih2n435vc3kb
              expr: sum(probe_http_duration_seconds{instance="$instance"})
              refId: A
          title: Latency for $instance
          type: timeseries
        - datasource:
            type: prometheus
            uid: beih2n435vc3kb
          description: ""
          fieldConfig:
            defaults:
                color:
                    mode: palette-classic
                custom:
                    axisBorderShow: false
                    axisCenteredZero: false
                    axisColorMode: text
                    axisLabel: ""
                    axisPlacement: auto
                    barAlignment: 0
                    barWidthFactor: 0.6
                    drawStyle: line
                    fillOpacity: 0
                    gradientMode: none
                    hideFrom:
                        legend: false
                        tooltip: false
                        viz: false
                    insertNulls: false
                    lineInterpolation: linear
                    lineWidth: 1
                    pointSize: 5
                    scaleDistribution:
                        type: linear
                    showPoints: auto
                    spanNulls: false
                    stacking:
                        group: A
                        mode: none
                    thresholdsStyle:
                        mode: "off"
                decimals: 1
                mappings: []
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                        - color: red
                          value: 80
                unit: s
            overrides: []
          gridPos:
            h: 12
            w: 12
            x: 12
            "y": 33
          id: 12
          options:
            legend:
                calcs:
                    - min
                    - mean
                    - max
                    - lastNotNull
                displayMode: table
                placement: bottom
                showLegend: true
            tooltip:
                hideZeros: false
                mode: single
                sort: none
          pluginVersion: 11.6.0
          targets:
            - datasource:
                type: prometheus
                uid: beih2n435vc3kb
              editorMode: code
              expr: (probe_http_duration_seconds{instance="$instance"})
              legendFormat: '{{phase}}'
              range: true
              refId: A
          title: Breakdown - Latency for $instance
          type: timeseries
    preload: false
    refresh: ""
    schemaVersion: 41
    tags: []
    templating:
        list:
            - current:
                text: https://admin.kasha.io
                value: https://admin.kasha.io
              datasource:
                type: prometheus
                uid: beih2n435vc3kb
              definition: label_values(probe_duration_seconds,instance)
              includeAll: false
              label: Instance
              name: instance
              options: []
              query:
                query: label_values(probe_duration_seconds,instance)
                refId: StandardVariableQuery
              refresh: 2
              regex: ""
              type: query
    time:
        from: now-12h
        to: now
    timepicker: {}
    timezone: utc
    title: '[NOT USED] HTTP Status and Overview for Blackbox Exporter'
    uid: AgileosConsultingHTTPBlackBoxExporter
    weekStart: monday
